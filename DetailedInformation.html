<!DOCTYPE html>
<html lang="en-US">

<head>
	<title>Aeon - Transaction
		<#PARAM name="TransactionNumber">
	</title>
	<#INCLUDE filename="include_head.html">
</head>

<body>
	
	<#INCLUDE filename="include_header.html">

	<#INCLUDE filename="include_menu.html">
	<div id="content" class="container" role="heading" aria-label="Content">
		<#INCLUDE filename="include_TransactionMenu.html">
		<#INCLUDE type="DetailedDocTypeInformation">
		<#INCLUDE filename="include_ResearcherTagsUpdate.html">

		<div id="billingInformation">
			<h3 class="header-detailed">Billing</h3>
			
			<#DATAREPEATER name="BillingDetails" TemplateFile="templates/DataRow_BillingDetail.html" noDataAction="This request has no billing information">

			<div class="row" id="billingTotal">
				<div class="col-lg-12">
					<div class="list-group-item d-flex justify-content-between">
						<span>Total</span>
						<strong>$
							<span id="summaryTotalCharges">0.00</span>
						</strong>
					</div>
				</div>
			</div>
		</div>
		
		<script>
			$(document).ready(function () {
				if (($('#billingInformation .billingDetail').length == 0)) {	
					$('#billingTotal').hide();
			}	
				else
				{
					$('#billingTotal').show();
				}
			});
		</script>

		<div id="notes<#PARAM name='TransactionNumber'>">
			<h3 class="header-detailed">Notes</h3>
			<div class="list-group">
				<#DATAREPEATER name="NotesInformation" TemplateFile="templates/DataRow_DefaultNote.html" noDataAction="This request has no notes">
			</div>
		</div>

		<h3 class="header-detailed">Tracking</h3>
		<div class="table">
			<#TABLE name="TrackingInformation" noDataAction="ShowMessageRow" noDataMessage="This request has no tracking information" column="ChangedDate:Changed Date" column="ChangedTo:Status" column="ChangedBy:Changed By">
		</div>
			
		<#INCLUDE filename="include_footer.html">
		
	</div>

	<script type="text/javascript">
		$(document).ready(function () {

			UpdateCharges();
		});
		function UpdateCharges() {
			var total = 0;
			var tax = 0;
			var subTotal = 0;
			var shTotal = 0;
			$('[data-totalCharge]').each(function () {
				total += Number($(this).attr('data-totalCharge'));
			});
			$('[data-taxCharge]').each(function () {
				tax += Number($(this).attr('data-taxCharge'));
			});
			$('[data-subTotalCharge]').each(function () {
				subTotal += Number($(this).attr('data-subTotalCharge'));
			});

			$('[data-context="Service Level"][data-subTotalCharge]').each(function () {
				shTotal += Number($(this).attr('data-subTotalCharge'));
			});
			$('[data-context="Shipping Option"][data-subTotalCharge]').each(function () {
				shTotal += Number($(this).attr('data-subTotalCharge'));
			});

			$('#summarySubtotal').text((subTotal - shTotal).toFixed(2));
			$('#summaryTax').text(tax.toFixed(2));
			$('#summarySH').text(shTotal.toFixed(2));
			$('#summaryTotalCharges').text(total.toFixed(2));
		}
	</script>
</body>
</html>
